<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Recipe Book</title>
    <link rel="stylesheet" href="/public/styles.css" type="text/css" type="text/css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/easymde/dist/easymde.min.css">
    <link rel="stylesheet" href="/public/bootstrap.min.css">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous"></script>

    <script src="https://cdn.jsdelivr.net/npm/easymde/dist/easymde.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
</head>

<body>
    <div class="container">
        <h1>Recipe Book</h1>

        <form action="/save" method="post">
            <textarea name="recipe" rows="10" cols="50" placeholder="Enter your recipe in Markdown format"></textarea>
            <br>
            <label for="exampleSelect1" class="form-label mt-4">Category</label>
            <div class="row">
                <div class="col">
                    <select name="category" class="form-select" id="exampleSelect1">
                        <option>
                            French
                        </option>
                        <option>
                            Italian
                        </option>
                        <option>
                            Chinese
                        </option>
                    </select>
                </div>
                <div class="col">
                    <button class="btn btn-primary" type="submit">Save Recipe</button>

                </div>
            </div>

        </form>

        <h2>Recipes</h2>





        <ul class="nav nav-tabs" role="tablist">
            <% categories.forEach(category => { %>
                <li class="nav-item" role="presentation">
                    <a class="nav-link" data-bs-toggle="tab" id="<%= category %>-tab" href="#<%= category %>" aria-selected="false" role="tab">
                        <%= category %>
                    </a>
                </li>
            <% }); %>
        </ul>
        <div id="myTabContent" class="tab-content">
            <% categories.forEach(category => { %>
                <div class="tab-pane fade" id="<%= category %>" role="tabpanel">
                    <ul>
                        <% recipes[category].forEach(recipe => { %>
                            <li>
                                <h3><%= recipe.title %></h3>
                                <div class="recipe-content">
                                    <%= recipe.content %>
                                </div>
                            </li>
                        <% }); %>
                    </ul>
                </div>
            <% }); %>
        </div>
  
    <script>
        const easyMDE = new EasyMDE();
        const recipeContent = document.querySelectorAll('.recipe-content');
        recipeContent.forEach(c => {
            c.innerHTML = marked.parse(c.innerHTML);
        })

    </script>
</body>

</html>